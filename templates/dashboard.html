<!DOCTYPE html>
<html>
<head>
  <title>Smart Waste Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<nav class="navbar navbar-dark bg-success px-4">
  <span class="navbar-brand">Smart Waste Monitoring Dashboard</span>
  <a href="/logout" class="btn btn-danger btn-sm">Logout</a>
</nav>

<!-- WIDE BANNER -->
<img src="{{ url_for('static', filename='images/waste.jpg') }}"
     style="width:100%; height:220px; object-fit:cover;">

<div class="container mt-4">

  <!-- INFO CARDS -->
  <div class="row text-center mb-4">
    <div class="col-md-4">
      <div class="card bg-success text-white p-3">
        <h5>Total Bins</h5>
        <h2>{{ data|length }}</h2>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-warning text-white p-3">
        <h5>Monitoring</h5>
        <h2>LIVE</h2>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-primary text-white p-3">
        <h5>System</h5>
        <h2>ONLINE</h2>
      </div>
    </div>
  </div>

  <!-- TABLE -->
  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Bin ID</th>
        <th>Area</th>
        <th>Gas</th>
        <th>Bin Level (%)</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for k, v in data.items() %}
      <tr class="{% if v.status=='CRITICAL' %}table-danger{% else %}table-success{% endif %}">
        <td>{{ k }}</td>
        <td>{{ v.area }}</td>
        <td>{{ v.gas }}</td>
        <td>{{ v.level }}</td>
        <td>
          {% if v.status == "CRITICAL" %}
            <span class="badge bg-danger">CRITICAL</span>
          {% else %}
            <span class="badge bg-success">NORMAL</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if data|length == 0 %}
    <p class="text-center text-muted mt-3">
      No ESP data received yet.
    </p>
  {% endif %}

</div>

</body>
</html>
